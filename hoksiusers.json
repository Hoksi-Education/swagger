{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/users/":{"post":{"tags":["users"],"summary":"Create User","description":"用戶自行註冊Account","operationId":"create_user_users__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__users_create__CreateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateResponse"}}}},"400":{"description":"Identity not support regist / Verify method not correct"},"406":{"description":"Username used"},"409":{"description":"Apply exists"},"422":{"description":"Phone not valid or Email not valid"},"500":{"description":"Send verification fail"}}},"get":{"tags":["users"],"summary":"Select Users Simple Data","description":"選取多個user的簡單資料","operationId":"select_users_simple_data_users__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_uids","in":"query","required":true,"schema":{"type":"array","items":{"type":"string"},"title":"User Uids"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SimpleUserReponse"},"title":"Response 200 Select Users Simple Data Users  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["users"],"summary":"Update User","description":"用戶更改自己的資料，只限在hoksiusers app呼叫","operationId":"update_user_users__put","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__users__UpdateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"401":{"description":"token fail"},"403":{"description":"you are not using token other than hoksiusers app"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/verify":{"post":{"tags":["users"],"summary":"Verify User","operationId":"verify_user_users_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__users_create__VerifyBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"self registration is not allowed"},"401":{"description":"Code incorrect"},"404":{"description":"apply not exists or outdated"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/forgetpassword":{"post":{"tags":["users"],"summary":"Forget Password","operationId":"forget_password_users_forgetpassword_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgetBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgetResponse"}}}},"400":{"description":"method not correct or user not exists"},"401":{"description":"email of phone not provided"},"409":{"description":"reset request already exists"},"422":{"description":"phone not valid"}}}},"/users/verifyreset":{"post":{"tags":["users"],"summary":"Verify Reset","operationId":"verify_reset_users_verifyreset_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__users_forget__VerifyBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"400":{"description":"method not correct"},"401":{"description":"Code fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/login":{"post":{"tags":["users"],"summary":"Login","description":"用戶登入到hoksiusers","operationId":"login_users_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"login fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/accesstoken":{"get":{"tags":["users"],"summary":"Select Access Token","description":"選取自己的永久Token","operationId":"select_access_token_users_accesstoken_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/LoginResponse"},"type":"array","title":"Response 200 Select Access Token Users Accesstoken Get"}}}},"400":{"description":"login fail"}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["users"],"summary":"Generate Access Token","description":"建立一個永久的Access Token","operationId":"generate_access_token_users_accesstoken_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessTokenBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"login fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/users/accesstoken/{token}":{"delete":{"tags":["users"],"summary":"Select Access Token","description":"選取自己的永久Token","operationId":"select_access_token_users_accesstoken__token__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"string","title":"Response 200 Select Access Token Users Accesstoken  Token  Delete"}}}},"400":{"description":"login fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/login/phone":{"post":{"tags":["users"],"summary":"Login By Phone","description":"用戶登入到hoksiusers","operationId":"login_by_phone_users_login_phone_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginByPhoneBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"login fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/login/email":{"post":{"tags":["users"],"summary":"Login By Email","description":"用戶登入到hoksiusers","operationId":"login_by_email_users_login_email_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginByEmailBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"login fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/loginwith":{"post":{"tags":["users"],"summary":"Loginwith","description":"用戶登入到hoksiusers以外的其他app，授權其他app使用他的帳戶，會給予一個code，該code可以透過/users/token端口換取token","operationId":"loginwith_users_loginwith_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginwithBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginwithResponse"}}}},"401":{"description":"not allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/users/token":{"post":{"tags":["users"],"summary":"Get Token","description":"client app的伺服器端可以呼喚這個端口，使用code換取token","operationId":"get_token_users_token_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"grant type not correct"},"401":{"description":"code fail"},"403":{"description":"app secret fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/renew":{"post":{"tags":["users"],"summary":"Renew Token","description":"client app的伺服器可以呼叫這個端口，使用refresh token換領新的token，舊的token會立即失效","operationId":"renew_token_users_renew_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RenewBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"expired refresh token"},"401":{"description":"code fail"},"403":{"description":"app secret fail"},"500":{"description":"family not exists"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/check":{"post":{"tags":["users"],"summary":"Check Token","description":"client app的伺服器可以呼叫這個端口，檢查token是否有效","operationId":"check_token_users_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"401":{"description":"code fail"},"403":{"description":"app secret fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/search":{"get":{"tags":["users"],"summary":"Search Users","description":"搜尋用戶","operationId":"search_users_users_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"identity","in":"query","required":true,"schema":{"type":"string","title":"Identity"}},{"name":"text","in":"query","required":true,"schema":{"type":"string","title":"Text"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SimpleUserReponse"},"title":"Response 200 Search Users Users Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_uid}":{"get":{"tags":["users"],"summary":"Select User Simple Data","description":"選取一個user的簡單資料","operationId":"select_user_simple_data_users__user_uid__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_uid","in":"path","required":true,"schema":{"type":"string","title":"User Uid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimpleUserReponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/xcheck/{check_token}":{"get":{"tags":["users"],"summary":"Xcheck Token","operationId":"xcheck_token_users_xcheck__check_token__get","parameters":[{"name":"check_token","in":"path","required":true,"schema":{"type":"string","title":"Check Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimpleUserReponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/avatar":{"post":{"tags":["users"],"summary":"Upload Profilepic","description":"用戶更改自己的頭像，只限在hoksiusers app呼叫","operationId":"upload_profilepic_users_avatar_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_profilepic_users_avatar_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"file not image"},"401":{"description":"token fail"},"403":{"description":"you are not using token other than hoksiusers app"},"500":{"description":"upload fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/users/updatepassword":{"post":{"tags":["users"],"summary":"Update Password","description":"用戶更改自己的密碼，只限在hoksiusers app呼叫，所有app的token會立即失效，並返回新的hoksiusers app的token","operationId":"update_password_users_updatepassword_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePasswordBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"401":{"description":"Token fail"},"403":{"description":"You are not using token for hoksiusers"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/users/logout":{"post":{"tags":["users"],"summary":"Logout","description":"刪除header中傳送的token使其失效","operationId":"logout_users_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/apps/":{"get":{"tags":["apps"],"summary":"Select Apps","operationId":"select_apps_apps__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectAppReturn"}}}},"401":{"description":"login first"},"500":{"description":"Database error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["apps"],"summary":"Create App","operationId":"create_app_apps__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__apps__CreateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppReturn"}}}},"401":{"description":"login first"},"500":{"description":"Database error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/apps/{appuid}":{"get":{"tags":["apps"],"summary":"Select Single App","operationId":"select_single_app_apps__appuid__get","parameters":[{"name":"appuid","in":"path","required":true,"schema":{"type":"string","title":"Appuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppReturn"}}}},"500":{"description":"Database error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/apps/{app_uid}":{"put":{"tags":["apps"],"summary":"Update App","operationId":"update_app_apps__app_uid__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"app_uid","in":"path","required":true,"schema":{"type":"string","title":"App Uid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__apps__UpdateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppReturn"}}}},"401":{"description":"login first"},"403":{"description":"you are not the app owner"},"404":{"description":"app not exists"},"500":{"description":"Database error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["apps"],"summary":"Delete App","operationId":"delete_app_apps__app_uid__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"app_uid","in":"path","required":true,"schema":{"type":"string","title":"App Uid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteAppReturn"}}}},"401":{"description":"login first"},"403":{"description":"you are not the app owner"},"404":{"description":"app not exists"},"409":{"description":"Cannot delete because tokens exist"},"500":{"description":"Database error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users":{"get":{"tags":["admin"],"summary":"Select Users","description":"讀取用戶清單","operationId":"select_users_admin_users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"identity","in":"query","required":true,"schema":{"type":"string","title":"Identity"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"search","in":"query","required":false,"schema":{"type":"string","title":"Search"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectResponse"}}}},"401":{"description":"Not allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["admin"],"summary":"Create User","description":"建立新用戶","operationId":"create_user_admin_users_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__admin__CreateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"401":{"description":"Not allowed"},"409":{"description":"Username used"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{useruid}":{"get":{"tags":["admin"],"summary":"Select Single User","description":"讀取單一用戶的記錄","operationId":"select_single_user_admin_users__useruid__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"useruid","in":"path","required":true,"schema":{"type":"string","title":"Useruid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"401":{"description":"Not allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["admin"],"summary":"Update User","description":"更新用戶","operationId":"update_user_admin_users__useruid__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"useruid","in":"path","required":true,"schema":{"type":"string","title":"Useruid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__admin__UpdateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"401":{"description":"Not allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{useruid}/loginrecords":{"get":{"tags":["admin"],"summary":"Select User Login Records","description":"讀取單一用戶登入的記錄","operationId":"select_user_login_records_admin_users__useruid__loginrecords_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"useruid","in":"path","required":true,"schema":{"type":"string","title":"Useruid"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRecordResponse"}}}},"401":{"description":"Not allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{useruid}/resetpassword":{"post":{"tags":["admin"],"summary":"Reset Password","description":"重設用戶的密碼","operationId":"reset_password_admin_users__useruid__resetpassword_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"useruid","in":"path","required":true,"schema":{"type":"string","title":"Useruid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"400":{"description":"email empty"},"401":{"description":"Not allowed"},"403":{"description":"noti_method not supported"},"404":{"description":"User not exists"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/forceresetpassword":{"post":{"tags":["admin"],"summary":"Force Reset Password","description":"強制重設用戶的密碼，供舊Program使用","operationId":"force_reset_password_admin_users_forceresetpassword_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForceResetBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"400":{"description":"email empty"},"401":{"description":"Not allowed"},"403":{"description":"noti_method not supported"},"404":{"description":"User not exists"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/admin/users/{useruid}/logout":{"post":{"tags":["admin"],"summary":"Logout User","description":"從所有的app登出用戶","operationId":"logout_user_admin_users__useruid__logout_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"useruid","in":"path","required":true,"schema":{"type":"string","title":"Useruid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"401":{"description":"Not allowed"},"404":{"description":"User not exists"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{useruid}/logout/{token}":{"post":{"tags":["admin"],"summary":"Logout User Single","description":"使單一token失效","operationId":"logout_user_single_admin_users__useruid__logout__token__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"useruid","in":"path","required":true,"schema":{"type":"string","title":"Useruid"}},{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"401":{"description":"Not allowed"},"404":{"description":"User not exists"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/forceupdate":{"post":{"tags":["admin"],"summary":"Force Update User","description":"強制更新用戶，供舊program使用","operationId":"force_update_user_admin_users_forceupdate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForceUpdateBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"401":{"description":"Not allowed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/admin/users/forceavatar":{"post":{"tags":["admin"],"summary":"Upload Profilepic","description":"強制更新avatar，供舊program使用","operationId":"upload_profilepic_admin_users_forceavatar_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_profilepic_admin_users_forceavatar_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"400":{"description":"file not image"},"401":{"description":"token fail"},"403":{"description":"you are not using token other than hoksiusers app"},"500":{"description":"upload fail"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/identities/{identity_uid}":{"get":{"tags":["identities"],"summary":"Select Single Identity","operationId":"select_single_identity_identities__identity_uid__get","parameters":[{"name":"identity_uid","in":"path","required":true,"schema":{"type":"string","title":"Identity Uid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Identity_response"}}}},"404":{"description":"Identity not exists"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/version":{"get":{"summary":"Read Version","operationId":"read_version_version_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AccessTokenBody":{"properties":{"name":{"type":"string","title":"Name"},"appuid":{"type":"string","title":"Appuid"}},"type":"object","required":["name","appuid"],"title":"AccessTokenBody"},"AppReturn":{"properties":{"uid":{"type":"string","title":"Uid"},"name":{"type":"string","title":"Name"},"secret":{"type":"string","title":"Secret"},"createdby":{"type":"string","title":"Createdby"}},"type":"object","required":["uid","name","secret","createdby"],"title":"AppReturn"},"Body_upload_profilepic_admin_users_forceavatar_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"username":{"type":"string","title":"Username"},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["file","username","identity"],"title":"Body_upload_profilepic_admin_users_forceavatar_post"},"Body_upload_profilepic_users_avatar_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_profilepic_users_avatar_post"},"CheckBody":{"properties":{"token":{"type":"string","title":"Token"},"appuid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appuid"},"appsecret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appsecret"}},"type":"object","required":["token"],"title":"CheckBody"},"CreateResponse":{"properties":{"uid":{"type":"string","title":"Uid"},"username":{"type":"string","title":"Username"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phoneregion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phoneregion"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"},"identity":{"type":"string","title":"Identity"},"code":{"type":"string","title":"Code"},"code_expired_at":{"type":"string","title":"Code Expired At"},"verify_method":{"type":"string","title":"Verify Method"}},"type":"object","required":["uid","username","identity","code","code_expired_at","verify_method"],"title":"CreateResponse"},"DeleteAppReturn":{"properties":{"uid":{"type":"string","title":"Uid"}},"type":"object","required":["uid"],"title":"DeleteAppReturn"},"ForceResetBody":{"properties":{"username":{"type":"string","title":"Username"},"identity":{"type":"string","title":"Identity"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","identity","password"],"title":"ForceResetBody"},"ForceUpdateBody":{"properties":{"username":{"type":"string","title":"Username"},"identity":{"type":"string","title":"Identity"},"allowlogin":{"type":"boolean","title":"Allowlogin"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"}},"type":"object","required":["username","identity","allowlogin"],"title":"ForceUpdateBody"},"ForgetBody":{"properties":{"identity":{"type":"string","title":"Identity"},"username":{"type":"string","title":"Username"},"method":{"type":"string","title":"Method"}},"type":"object","required":["identity","username","method"],"title":"ForgetBody"},"ForgetResponse":{"properties":{"identity":{"type":"string","title":"Identity"},"username":{"type":"string","title":"Username"},"phoneregion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phoneregion"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"method":{"type":"string","title":"Method"}},"type":"object","required":["identity","username","method"],"title":"ForgetResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Identity_response":{"properties":{"uid":{"type":"string","title":"Uid"},"name":{"type":"string","title":"Name"},"can_regist":{"type":"boolean","title":"Can Regist"}},"type":"object","required":["uid","name","can_regist"],"title":"Identity_response"},"LoginBody":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["username","password","identity"],"title":"LoginBody"},"LoginByEmailBody":{"properties":{"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["email","password","identity"],"title":"LoginByEmailBody"},"LoginByPhoneBody":{"properties":{"phone":{"type":"string","title":"Phone"},"password":{"type":"string","title":"Password"},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["phone","password","identity"],"title":"LoginByPhoneBody"},"LoginRecordResponse":{"properties":{"count":{"type":"integer","title":"Count"},"items":{"items":{"$ref":"#/components/schemas/SingleLoginRecord"},"type":"array","title":"Items"}},"type":"object","required":["count","items"],"title":"LoginRecordResponse"},"LoginResponse":{"properties":{"token":{"type":"string","title":"Token"},"created_at":{"type":"string","title":"Created At"},"appuid":{"type":"string","title":"Appuid"},"token_expired_at":{"type":"string","title":"Token Expired At"},"uid":{"type":"string","title":"Uid"},"username":{"type":"string","title":"Username"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"avatar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar"},"identity":{"type":"string","title":"Identity"},"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"},"allowlogin":{"type":"boolean","title":"Allowlogin"},"isadmin":{"type":"boolean","title":"Isadmin"},"refresh_token":{"type":"string","title":"Refresh Token"},"refresh_expired_at":{"type":"string","title":"Refresh Expired At"}},"type":"object","required":["token","created_at","appuid","token_expired_at","uid","username","email","phone","avatar","identity","nickname","allowlogin","isadmin","refresh_token","refresh_expired_at"],"title":"LoginResponse"},"LoginwithBody":{"properties":{"appuid":{"type":"string","title":"Appuid"},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["appuid","identity"],"title":"LoginwithBody"},"LoginwithResponse":{"properties":{"code":{"type":"string","title":"Code"}},"type":"object","required":["code"],"title":"LoginwithResponse"},"LogoutResponse":{"properties":{"token":{"type":"string","title":"Token"}},"type":"object","required":["token"],"title":"LogoutResponse"},"RenewBody":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"},"appuid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appuid"},"appsecret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appsecret"},"token":{"type":"string","title":"Token"},"user_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Agent"}},"type":"object","required":["refresh_token","token"],"title":"RenewBody"},"ResetBody":{"properties":{"noti_method":{"type":"string","title":"Noti Method"}},"type":"object","required":["noti_method"],"title":"ResetBody"},"SelectAppReturn":{"properties":{"count":{"type":"integer","title":"Count"},"items":{"items":{"$ref":"#/components/schemas/AppReturn"},"type":"array","title":"Items"}},"type":"object","required":["count","items"],"title":"SelectAppReturn"},"SelectResponse":{"properties":{"count":{"type":"integer","title":"Count"},"items":{"items":{"$ref":"#/components/schemas/UserResponse"},"type":"array","title":"Items"}},"type":"object","required":["count","items"],"title":"SelectResponse"},"SimpleUserReponse":{"properties":{"uid":{"type":"string","title":"Uid"},"username":{"type":"string","title":"Username"},"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"},"avatar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar"},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["uid","username","identity"],"title":"SimpleUserReponse"},"SingleLoginRecord":{"properties":{"token":{"type":"string","title":"Token"},"useruid":{"type":"string","title":"Useruid"},"created_at":{"type":"string","title":"Created At"},"device_info":{"type":"string","title":"Device Info"},"appuid":{"type":"string","title":"Appuid"},"expired_at":{"type":"string","title":"Expired At"},"appname":{"type":"string","title":"Appname"}},"type":"object","required":["token","useruid","created_at","device_info","appuid","expired_at","appname"],"title":"SingleLoginRecord"},"TokenBody":{"properties":{"code":{"type":"string","title":"Code"},"appuid":{"type":"string","title":"Appuid"},"appsecret":{"type":"string","title":"Appsecret"},"grant_type":{"type":"string","title":"Grant Type"}},"type":"object","required":["code","appuid","appsecret","grant_type"],"title":"TokenBody"},"UpdatePasswordBody":{"properties":{"newpassword":{"type":"string","title":"Newpassword"},"oldpassword":{"type":"string","title":"Oldpassword"}},"type":"object","required":["newpassword","oldpassword"],"title":"UpdatePasswordBody"},"UserResponse":{"properties":{"uid":{"type":"string","title":"Uid"},"username":{"type":"string","title":"Username"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phoneregion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phoneregion"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"avatar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar"},"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"},"allowlogin":{"type":"boolean","title":"Allowlogin"},"identity":{"type":"string","title":"Identity"},"isadmin":{"type":"boolean","title":"Isadmin"}},"type":"object","required":["uid","username","allowlogin","identity","isadmin"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"app__admin__CreateBody":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"phoneregion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phoneregion"},"avatar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar"},"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"},"allowlogin":{"type":"boolean","title":"Allowlogin","default":true},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["username","password","identity"],"title":"CreateBody"},"app__admin__UpdateBody":{"properties":{"allowlogin":{"type":"boolean","title":"Allowlogin"},"isadmin":{"type":"boolean","title":"Isadmin"}},"type":"object","required":["allowlogin","isadmin"],"title":"UpdateBody"},"app__apps__CreateBody":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"CreateBody"},"app__apps__UpdateBody":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"UpdateBody"},"app__users__UpdateBody":{"properties":{"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phoneregion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phoneregion"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"}},"type":"object","title":"UpdateBody"},"app__users_create__CreateBody":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"phoneregion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phoneregion"},"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"},"allowlogin":{"type":"boolean","title":"Allowlogin","default":true},"verify_method":{"type":"string","title":"Verify Method"},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["username","password","verify_method","identity"],"title":"CreateBody"},"app__users_create__VerifyBody":{"properties":{"username":{"type":"string","title":"Username"},"code":{"type":"string","title":"Code"}},"type":"object","required":["username","code"],"title":"VerifyBody"},"app__users_forget__VerifyBody":{"properties":{"username":{"type":"string","title":"Username"},"code":{"type":"string","title":"Code"},"password":{"type":"string","title":"Password"},"identity":{"type":"string","title":"Identity"}},"type":"object","required":["username","code","password","identity"],"title":"VerifyBody"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}
